import{r as h,j as i}from"./index-ZB4qQtSB.js";import{T as de,c as q,i as me,d as he,s as ge,a as ye,b as k,e as xe,r as Se,f as I,g as F,h as K,j as be,k as A,l as W,m as j,n as D,o as Q,p as ve,C as je,q as Ce,B as E,O as M,D as R,u as we}from"./helper-DdlRQxoz.js";function $e(e){return Object.keys(e).length===0}function ze(e=null){const t=h.useContext(de);return!t||$e(t)?e:t}const Be=q();function N(e=Be){return ze(e)}const Te=e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??he;return Object.keys(e).forEach(o=>{n[o]?t.systemProps[o]=e[o]:t.otherProps[o]=e[o]}),t};function V(e){const{sx:t,...n}=e,{systemProps:o,otherProps:r}=Te(n);let s;return Array.isArray(t)?s=[o,...t]:typeof t=="function"?s=(...l)=>{const a=t(...l);return me(a)?{...o,...a}:o}:s={...o,...t},{...r,sx:s}}function ke(e={}){const{themeId:t,defaultTheme:n,defaultClassName:o="MuiBox-root",generateClassName:r}=e,s=ge("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(ye);return h.forwardRef(function(g,d){const c=N(n),{className:m,component:u="div",...f}=V(g);return i.jsx(s,{as:u,ref:d,className:k(m,r?r(o):o),theme:t&&c[t]||c,...f})})}const Ne=xe();function Pe(e){const{theme:t,name:n,props:o}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?o:Se(t.components[n].defaultProps,o)}function Ge({props:e,name:t,defaultTheme:n,themeId:o}){let r=N(n);return o&&(r=r[o]||r),Pe({theme:r,name:t,props:e})}function Me(e,t){return h.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const Re=(e,t)=>e.filter(n=>t.includes(n)),$=(e,t,n)=>{const o=e.keys[0];Array.isArray(t)?t.forEach((r,s)=>{n((l,a)=>{s<=e.keys.length-1&&(s===0?Object.assign(l,a):l[e.up(e.keys[s])]=a)},r)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:Re(e.keys,Object.keys(t))).forEach(s=>{if(e.keys.includes(s)){const l=t[s];l!==void 0&&n((a,g)=>{o===s?Object.assign(a,g):a[e.up(s)]=g},l)}}):(typeof t=="number"||typeof t=="string")&&n((r,s)=>{Object.assign(r,s)},t)};function T(e){return`--Grid-${e}Spacing`}function P(e){return`--Grid-parent-${e}Spacing`}const _="--Grid-columns",w="--Grid-parent-columns",Ee=({theme:e,ownerState:t})=>{const n={};return $(e.breakpoints,t.size,(o,r)=>{let s={};r==="grow"&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),r==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof r=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${r} / var(${w}) - (var(${w}) - ${r}) * (var(${P("column")}) / var(${w})))`}),o(n,s)}),n},Oe=({theme:e,ownerState:t})=>{const n={};return $(e.breakpoints,t.offset,(o,r)=>{let s={};r==="auto"&&(s={marginLeft:"auto"}),typeof r=="number"&&(s={marginLeft:r===0?"0px":`calc(100% * ${r} / var(${w}) + var(${P("column")}) * ${r} / var(${w}))`}),o(n,s)}),n},Ie=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={[_]:12};return $(e.breakpoints,t.columns,(o,r)=>{const s=r??12;o(n,{[_]:s,"> *":{[w]:s}})}),n},Fe=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return $(e.breakpoints,t.rowSpacing,(o,r)=>{const s=typeof r=="string"?r:e.spacing?.(r);o(n,{[T("row")]:s,"> *":{[P("row")]:s}})}),n},Ae=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return $(e.breakpoints,t.columnSpacing,(o,r)=>{const s=typeof r=="string"?r:e.spacing?.(r);o(n,{[T("column")]:s,"> *":{[P("column")]:s}})}),n},We=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return $(e.breakpoints,t.direction,(o,r)=>{o(n,{flexDirection:r})}),n},De=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${T("row")}) var(${T("column")})`}}),Ve=e=>{const t=[];return Object.entries(e).forEach(([n,o])=>{o!==!1&&o!==void 0&&t.push(`grid-${n}-${String(o)}`)}),t},Le=(e,t="xs")=>{function n(o){return o===void 0?!1:typeof o=="string"&&!Number.isNaN(Number(o))||typeof o=="number"&&o>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const o=[];return Object.entries(e).forEach(([r,s])=>{n(s)&&o.push(`spacing-${r}-${String(s)}`)}),o}return[]},Ue=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`];function _e(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(n=>{e[n]!==void 0&&delete e[n]})}const He=q(),Je=Ne("div",{name:"MuiGrid",slot:"Root"});function qe(e){return Ge({props:e,name:"MuiGrid",defaultTheme:He})}function Ke(e={}){const{createStyledComponent:t=Je,useThemeProps:n=qe,useTheme:o=N,componentName:r="MuiGrid"}=e,s=(d,c)=>{const{container:m,direction:u,spacing:f,wrap:p,size:y}=d,x={root:["root",m&&"container",p!=="wrap"&&`wrap-xs-${String(p)}`,...Ue(u),...Ve(y),...m?Le(f,c.breakpoints.keys[0]):[]]};return I(x,v=>F(r,v),{})};function l(d,c,m=()=>!0){const u={};return d===null||(Array.isArray(d)?d.forEach((f,p)=>{f!==null&&m(f)&&c.keys[p]&&(u[c.keys[p]]=f)}):typeof d=="object"?Object.keys(d).forEach(f=>{const p=d[f];p!=null&&m(p)&&(u[f]=p)}):u[c.keys[0]]=d),u}const a=t(Ie,Ae,Fe,Ee,We,De,Oe),g=h.forwardRef(function(c,m){const u=o(),f=n(c),p=V(f);_e(p,u.breakpoints);const{className:y,children:x,columns:v=12,container:B=!1,component:Y="div",direction:Z="row",wrap:ee="wrap",size:te={},offset:ne={},spacing:G=0,rowSpacing:oe=G,columnSpacing:re=G,unstable_level:C=0,...se}=p,ie=l(te,u.breakpoints,b=>b!==!1),ae=l(ne,u.breakpoints),ce=c.columns??(C?void 0:v),le=c.spacing??(C?void 0:G),pe=c.rowSpacing??c.spacing??(C?void 0:oe),ue=c.columnSpacing??c.spacing??(C?void 0:re),U={...p,level:C,columns:ce,container:B,direction:Z,wrap:ee,spacing:le,rowSpacing:pe,columnSpacing:ue,size:ie,offset:ae},fe=s(U,u);return i.jsx(a,{ref:m,as:Y,ownerState:U,className:k(fe.root,y),...se,children:h.Children.map(x,b=>h.isValidElement(b)&&Me(b,["Grid"])&&B&&b.props.container?h.cloneElement(b,{unstable_level:b.props?.unstable_level??C+1}):b)})});return g.muiName="Grid",g}function Qe(){const e=N(be);return e[K]||e}function Xe(){return V}function Ye(e){return F("MuiSvgIcon",e)}A("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Ze=e=>{const{color:t,fontSize:n,classes:o}=e,r={root:["root",t!=="inherit"&&`color${j(t)}`,`fontSize${j(n)}`]};return I(r,Ye,o)},et=D("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${j(n.color)}`],t[`fontSize${j(n.fontSize)}`]]}})(Q(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),O=h.forwardRef(function(t,n){const o=W({props:t,name:"MuiSvgIcon"}),{children:r,className:s,color:l="inherit",component:a="svg",fontSize:g="medium",htmlColor:d,inheritViewBox:c=!1,titleAccess:m,viewBox:u="0 0 24 24",...f}=o,p=h.isValidElement(r)&&r.type==="svg",y={...o,color:l,component:a,fontSize:g,instanceFontSize:t.fontSize,inheritViewBox:c,viewBox:u,hasSvgAsChild:p},x={};c||(x.viewBox=u);const v=Ze(y);return i.jsxs(et,{as:a,className:k(v.root,s),focusable:"false",color:d,"aria-hidden":m?void 0:!0,role:m?"img":void 0,ref:n,...x,...f,...p&&r.props,ownerState:y,children:[p?r.props.children:r,m?i.jsx("title",{children:m}):null]})});O.muiName="SvgIcon";function L(e,t){function n(o,r){return i.jsx(O,{"data-testid":void 0,ref:r,...o,children:e})}return n.muiName=O.muiName,h.memo(h.forwardRef(n))}function tt(e){return F("MuiTypography",e)}A("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const nt={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},ot=Xe(),rt=e=>{const{align:t,gutterBottom:n,noWrap:o,paragraph:r,variant:s,classes:l}=e,a={root:["root",s,e.align!=="inherit"&&`align${j(t)}`,n&&"gutterBottom",o&&"noWrap",r&&"paragraph"]};return I(a,tt,l)},st=D("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${j(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Q(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,n])=>t!=="inherit"&&n&&typeof n=="object").map(([t,n])=>({props:{variant:t},style:n})),...Object.entries(e.palette).filter(ve()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${j(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),H={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},J=h.forwardRef(function(t,n){const{color:o,...r}=W({props:t,name:"MuiTypography"}),s=!nt[o],l=ot({...r,...s&&{color:o}}),{align:a="inherit",className:g,component:d,gutterBottom:c=!1,noWrap:m=!1,paragraph:u=!1,variant:f="body1",variantMapping:p=H,...y}=l,x={...l,align:a,color:o,className:g,component:d,gutterBottom:c,noWrap:m,paragraph:u,variant:f,variantMapping:p},v=d||(u?"p":p[f]||H[f])||"span",B=rt(x);return i.jsx(st,{as:v,ref:n,className:k(B.root,g),...y,ownerState:x,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...y.style}})}),it=A("MuiBox",["root"]),at=Ce(),S=ke({themeId:K,defaultTheme:at,defaultClassName:it.root,generateClassName:je.generate}),ct=Ke({createStyledComponent:D("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>W({props:e,name:"MuiGrid"}),useTheme:Qe}),lt=L(i.jsx("path",{d:"M22 3.41 16.71 8.7 20 12h-8V4l3.29 3.29L20.59 2zM3.41 22l5.29-5.29L12 20v-8H4l3.29 3.29L2 20.59z"})),pt=L(i.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"})),ut=L(i.jsx("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"}));function X({showIcon:e=!0,isVisible:t=!1}){return t?i.jsxs(S,{sx:{position:"relative"},children:[e&&i.jsx(S,{style:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:100},children:i.jsx(pt,{className:"animate-spin",sx:{color:"white",animationDirection:"reverse",fontSize:48}})}),i.jsx(S,{sx:{position:"fixed",width:"100vw",height:"100vh",background:"#00000080"}})]}):null}function ft({character:e}){return i.jsx(S,{children:i.jsx("pre",{children:JSON.stringify(e,null,2)})})}function dt({error:e}){return e?i.jsxs(S,{sx:{position:"relative"},children:[i.jsx(X,{showIcon:!1,isVisible:!0}),i.jsxs(S,{style:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:101,background:"#ff000080",padding:"1rem",borderRadius:"0.5rem"},children:[i.jsx(J,{variant:"h6",style:{color:"white"},children:"Error"}),i.jsx(J,{style:{color:"white"},children:e})]})]}):null}function mt(){const[e,t]=h.useState(!1);async function n(){await M.popover.close(`${R}/sheet-popover`)}async function o(){e?(await M.popover.setHeight(`${R}/sheet-popover`,500),t(r=>!r)):(await M.popover.setHeight(`${R}/sheet-popover`,45),t(r=>!r))}return i.jsxs(ct,{container:!0,sx:{height:45,alignItems:"center",justifyContent:"space-between",position:"fixed",bottom:0,left:0,right:0,borderTop:"2px solid #BB99FF",background:"#FFF"},children:[i.jsx(E,{onClick:o,children:e?i.jsx(ut,{}):i.jsx(lt,{})}),i.jsx(E,{onClick:n,sx:{background:"#BB99FF",color:"#FFF",mr:"1rem"},children:"Close"})]})}function ht({parsePdf:e,isLoading:t}){const n=h.useRef(null);async function o(s){const l=s.target.files?.[0];l&&await e(l),n.current&&(n.current.value="")}const r=()=>{t||n.current?.click()};return i.jsxs(S,{children:[i.jsx("input",{type:"file",accept:"application/pdf",ref:n,onChange:o,style:{display:"none"},disabled:t}),i.jsx(E,{onClick:r,disabled:t,children:t?"Parsing Sheet...":"Upload 5e Character Sheet"})]})}const z={Footer:mt,Backdrop:X,Error:dt,Character:ft,Upload:ht};function xt(){const{character:e,isLoading:t,error:n,parsePdf:o}=we();return i.jsxs(S,{sx:{position:"relative"},children:[i.jsxs(S,{sx:{position:"relative"},children:[i.jsx(z.Backdrop,{isVisible:t}),i.jsx(z.Error,{error:n}),i.jsx(z.Upload,{isLoading:t,parsePdf:o}),i.jsx(z.Character,{character:e})]}),i.jsx(z.Footer,{})]})}export{xt as component};
