import{r as f,j as e}from"./index-ZB4qQtSB.js";import{u as g,O as a,D as o,B as l}from"./helper-DdlRQxoz.js";function x(){const n=f.useRef(null),{character:c,isLoading:t,error:r,parsePdf:p}=g();console.log(c);async function h(u){const i=u.target.files?.[0];i&&await p(i),n.current&&(n.current.value="")}const d=()=>{t||n.current?.click()},s=()=>{console.log("Opening: ",`${o}/sheet-popover`),a.popover.open({id:`${o}/sheet-popover`,url:"/sheet",height:500,width:600,disableClickAway:!0,anchorOrigin:{horizontal:"RIGHT",vertical:"BOTTOM"}})};return a.onReady(()=>{a.contextMenu.create({id:`${o}/sheet-menu`,icons:[{icon:"/icons/sheet.svg",label:"Attach Sheet",filter:{every:[{key:"layer",value:"CHARACTER"}]}}],onClick:s})}),e.jsxs("div",{className:"pdf-uploader",children:[e.jsx("input",{type:"file",accept:"application/pdf",ref:n,onChange:h,style:{display:"none"},disabled:t}),e.jsx(l,{onClick:d,disabled:t,children:t?"Parsing Sheet...":"Upload 5e Character Sheet"}),e.jsx(l,{onClick:s,children:"Open modal"}),r&&e.jsx("p",{className:"error-message",children:r})]})}export{x as component};
